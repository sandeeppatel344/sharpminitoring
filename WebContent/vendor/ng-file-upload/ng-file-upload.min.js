/*! 6.2.1 */
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="6.2.1",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progressFunc=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(a){function b(c,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))c.append(e,d);else if("form"===a.sendFieldsAs)if(angular.isObject(d))for(var f in d)d.hasOwnProperty(f)&&b(c,d[f],e+"["+f+"]");else c.append(e,d);else d=angular.isString(d)?d:JSON.stringify(d),"json-blob"===a.sendFieldsAs?c.append(e,new Blob([d],{type:"application/json"})):c.append(e,d)}return a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(c){var d,e=new FormData,f={};for(d in a.fields)a.fields.hasOwnProperty(d)&&(f[d]=a.fields[d]);c&&(f.data=c);for(d in f)if(f.hasOwnProperty(d)){var g=f[d];a.formDataAppender?a.formDataAppender(e,d,g):b(e,g,d)}if(null!=a.file){var h=a.fileFormDataName||"file";if(angular.isArray(a.file))for(var i=angular.isString(h),j=0;j<a.file.length;j++)e.append(i?h:h[j],a.file[j],a.fileName&&a.fileName[j]||a.file[j].name);else e.append(h,a.file,a.fileName||a.file.name)}return e}),d(a)},this.http=function(b){return b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof Blob?b:a.defaults.transformRequest[0](arguments)},d(b)},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),function(){ngFileUpload.service("Upload",["$parse","$timeout","$compile","UploadValidate",function(a,b,c,d){var e=d;return e.getAttrWithDefaults=function(a,b){return null!=a[b]?a[b]:null==e.defaults[b]?e.defaults[b]:e.defaults[b].toString()},e.attrGetter=function(b,c,d,e){return d?e?a(this.getAttrWithDefaults(c,b))(d,e):a(this.getAttrWithDefaults(c,b))(d):this.getAttrWithDefaults(c,b)},e.updateModel=function(c,d,f,g,h,i,j){function k(){var j=e.attrGetter("ngfKeep",d,f);if(j===!0){var k=(c.$modelValue||[]).slice(0);if(h&&h.length)if(e.attrGetter("ngfKeepDistinct",d.scope)===!0){for(var l=k.length,m=0;m<h.length;m++){for(var n=0;l>n&&h[m].name!==k[n].name;n++);n===l&&k.push(h[m])}h=k}else h=k.concat(h);else h=k}var o=h&&h.length?h[0]:null;if(c){var p=!e.attrGetter("ngfMultiple",d,f)&&!e.attrGetter("multiple",d)&&!j;b(function(){a(e.attrGetter("ngModel",d)).assign(f,p?o:h)})}var q=e.attrGetter("ngfModel",d);q&&a(q).assign(f,h),g&&a(g)(f,{$files:h,$file:o,$event:i})}j?k():b(function(){k()})},e}])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){return"input"===b[0].tagName.toLowerCase()&&c.type&&"file"===c.type.toLowerCase()}function j(){return q("ngfChange")||q("ngfSelect")}function k(e){var f=e.__files_||e.target&&e.target.files;b.attr("__ngf_has_val_",!0),h.updateModel(d,c,a,j(),f,e),0===f.length&&(e.target.value=f)}function l(c){q("ngfMultiple")&&c.attr("multiple",e(q("ngfMultiple"))(a)),q("ngfCapture")&&c.attr("capture",e(q("ngfCapture"))(a)),q("accept")&&c.attr("accept",q("accept"));for(var d=0;d<b[0].attributes.length;d++){var f=b[0].attributes[d];(i()&&"type"!==f.name||"type"!==f.name&&"class"!==f.name&&"id"!==f.name&&"style"!==f.name)&&((null==f.value||""===f.value)&&("required"===f.name&&(f.value="required"),"multiple"===f.name&&(f.value="multiple")),c.attr(f.name,f.value))}}function m(c,d){if(!d&&(c||i()))return b.$$ngfRefElem||b;if(b.$$ngfProgramClick)return b;var e=angular.element('<input type="file">');return l(e),i()?(b.replaceWith(e),b=e,e.attr("__ngf_gen__",!0),g(b)(a)):(e.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),b.$$ngfRefElem&&b.$$ngfRefElem.remove(),b.$$ngfRefElem=e,document.body.appendChild(e[0])),e}function n(e){b.attr("__ngf_has_val_")&&(h.updateModel(d,c,a,j(),[],e,!0),b.removeAttr("__ngf_has_val_"))}function o(c){function d(a){a&&!b.$$ngfProgramClick&&(b.$$ngfProgramClick=!0,j[0].click(),f(function(){delete b.$$ngfProgramClick},500)),!i()&&a||!h||b.bind("click touchstart touchend",o)}if(b.attr("disabled")||r)return!1;if(null!=c){var e=c.changedTouches||c.originalEvent&&c.originalEvent.changedTouches;if("touchstart"===c.type)return s=e?e[0].clientY:0,!0;if(c.stopPropagation(),c.preventDefault(),"touchend"===c.type){var g=e?e[0].clientY:0;if(Math.abs(g-s)>20)return!1}}var h=q("ngfResetOnClick",a)!==!1,j=m(c,h);return j&&((!c||h)&&j.bind("change",k),c&&h&&q("ngfResetModelOnClick",a)!==!1&&n(c),p(navigator.userAgent)?setTimeout(function(){d(c)},0):d(c)),!1}function p(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=h.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}if(h.registerValidators(d,c,a),!b.attr("__ngf_gen__")){var q=function(a,b){return h.attrGetter(a,c,b)};a.$on("$destroy",function(){b.$$ngfRefElem&&b.$$ngfRefElem.remove()});var r=!1;c.$observe("ngfSelect",function(a){a===!1?b.attr("disabled","disabled"):a===!0&&b.removeAttr("disabled")});var s=0;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(b,m,l,k):o()}}ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}])}(),function(){ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){var d={},e=a;return e.dataUrl=function(a,e){if(a.dataUrl){var f=c.defer();return b(function(){f.resolve(a.dataUrl)}),f.promise}if(d[a])return d[a];var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var d;try{d=c.createObjectURL(a)}catch(f){return void g.reject()}d&&g.resolve(d)}else{var h=new FileReader;h.readAsDataURL(a),h.onload=function(a){b(function(){g.resolve(a.target.result)})},h.onerror=function(){b(function(){g.reject()})}}}else g.reject()}),d[a]=g.promise,d[a]["finally"](function(){delete d[a]}),d[a]},e}]),ngFileUpload.directive("ngfSrc",["$parse","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(d,e,f){c(function(){e.attr("src","{{("+f.ngfSrc+") | ngfDataUrl"+(a(f.ngfNoObjectUrl)(d)===!0?":true":"")+"}}"),f.$set("ngfSrc",null),b(e)(d)})}}}]),ngFileUpload.directive("ngfBackground",["$parse","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(d,e,f){c(function(){e.attr("style",e.attr("style")+";background-image:url('{{("+f.ngfBackground+") | ngfDataUrl"+(a(f.ngfNoObjectUrl)(d)===!0?":true":"")+"}}')"),f.$set("ngfBackground",null),b(e)(d)})}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d){return angular.isString(c)?b.trustAsResourceUrl(c):c&&!c.dataUrl?(void 0===c.dataUrl&&angular.isObject(c)&&(c.dataUrl=null,a.dataUrl(c,function(a,b){b.dataUrl=a},d)),""):(c&&c.dataUrl?b.trustAsResourceUrl(c.dataUrl):c)||""}}])}(),function(){function a(b){if(b.length>2&&"/"===b[0]&&"/"===b[b.length-1])return b.substring(1,b.length-1);var c=b.split(","),d="";if(c.length>1)for(var e=0;e<c.length;e++)d+="("+a(c[e])+")",e<c.length-1&&(d+="|");else 0===b.indexOf(".")&&(b="*"+b),d="^"+b.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",d=d.replace(/\\\*/g,".*").replace(/\\\?/g,".");return d}function b(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1e3*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1e6*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1e9*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a}ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(c,d,e){var f=c;f.validate=function(c,d,e,g,h,i){function j(){function a(){for(var a in d.$ngfValidations)d.$ngfValidations.hasOwnProperty(a)&&d.$setValidity(a,d.$ngfValidations[a])}h?f.validate(d,e,g,!1,function(){a()}):a()}function k(a,b,e){var f=m("ngf"+a[0].toUpperCase()+a.substr(1))||b(m("ngfValidate")||{});if(f){var g=!0;c&&angular.forEach(c.length?c:[c],function(b){return e(b,f)?void 0:(b.$error=a,b.$errorParam=f,g=!1,!1)}),d.$ngfValidations[a]=g}}function l(a,b,e,f,g){var h=m("ngf"+a[0].toUpperCase()+a.substr(1))||b(m("ngfValidate")||{});if(h&&c){var j=0,k=!1;c=c.length?c:[c],angular.forEach(c,function(b){return 0!==b.type.search(e)?!0:(n++,j++,void f(b).then(function(c){g(c,h)||(b.$error=a,b.$errorParam=h,k=!0)},function(){b.$error=a,b.$errorParam=h,k=!0})["finally"](function(){n--,j--,j||(d.$ngfValidations[a]=!k),n||i.call(d,d.$ngfValidations)}))})}}var m=function(a){return f.attrGetter(a,e,g)};if(h)return void i.call(d);d.$ngfValidations=d.$ngfValidations||{},-1===d.$formatters.indexOf(j)&&d.$formatters.push(j),f.validatePattern=function(b,c){var d=new RegExp(a(c),"gi");return null!=b.type&&d.test(b.type.toLowerCase())||null!=b.name&&d.test(b.name.toLowerCase())},k("pattern",function(a){return a.pattern},f.validatePattern),k("minSize",function(a){return a.size&&a.size.min},function(a,c){return a.size>=b(c)}),k("maxSize",function(a){return a.size&&a.size.max},function(a,c){return a.size<=b(c)});var n=0;l("maxHeight",function(a){return a.height&&a.height.max},/image/,this.imageDimensions,function(a,b){return a.height<=b}),l("minHeight",function(a){return a.height&&a.height.min},/image/,this.imageDimensions,function(a,b){return a.height>=b}),l("maxWidth",function(a){return a.height&&a.width.max},/image/,this.imageDimensions,function(a,b){return a.width<=b}),l("minWidth",function(a){return a.height&&a.width.min},/image/,this.imageDimensions,function(a,b){return a.width>=b}),l("maxDuration",function(a){return a.height&&a.duration.max},/audio|video/,this.mediaDuration,function(a,c){return a<=b(c)}),l("minDuration",function(a){return a.height&&a.duration.min},/audio|video/,this.mediaDuration,function(a,c){return a>=b(c)}),n||i.call(d,d.$ngfValidations)};var g={},h={};return f.imageDimensions=function(a){if(a.width&&a.height){var b=d.defer();return e(function(){b.resolve({width:a.width,height:a.height})}),b.promise}if(g[a])return g[a];var c=d.defer();return e(function(){return 0!==a.type.indexOf("image")?void c.reject("not image"):void f.dataUrl(a).then(function(b){var d=angular.element("<img>").attr("src",b).css("visibility","none").css("position","fixed");d.on("load",function(){var b=d[0].clientWidth,e=d[0].clientHeight;d.remove(),a.width=b,a.height=e,c.resolve({width:b,height:e})}),d.on("error",function(){d.remove(),c.reject("load error")}),angular.element(document.body).append(d)},function(){c.reject("load error")})}),g[a]=c.promise,g[a]["finally"](function(){delete g[a]}),g[a]},f.mediaDuration=function(a){if(a.duration){var b=d.defer();return e(function(){b.resolve(a.duration)}),b.promise}if(h[a])return h[a];var c=d.defer();return e(function(){return 0===a.type.indexOf("audio")||0===a.type.indexOf("video")?void c.reject("not image"):void f.dataUrl(a).then(function(b){var d=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",b).css("visibility","none").css("position","fixed");d.on("loadedmetadata",function(){var b=d[0].duration;a.duration=b,d.remove(),c.resolve(b)}),d.on("error",function(){d.remove(),c.reject("load error")}),angular.element(document.body).append(d)},function(){c.reject("load error")})}),h[a]=c.promise,h[a]["finally"](function(){delete h[a]}),h[a]},f}])}(),function(){function a(a,c,d,e,f,g,h,i){function j(a,b,c,d){var e=m("ngfDragOverClass",a,{$event:c});if(e&&(e.delay&&(r=e.delay),e.accept||e.reject)){var f=c.dataTransfer.items,g=[];if(null!=f){for(var h,j=0;j<f.length;j++)if(("file"===f[j].kind||""===f[j].kind)&&(g.push(),h=h||m("ngfPattern",a,{$event:c}),!i.validatePattern(f[j],h))){e=e.reject;break}e=e.accept}}d(e||m("ngfDragOverClass")||"dragover")}function k(a,b,c,d){function e(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;a.push({name:b.name,type:"directory",path:d});var f=b.createReader(),g=[];i++;var h=function(){f.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var f=0;f<g.length;f++)e(a,g[f],(c?c:"")+b.name+"/");i--}}catch(j){i--,console.error(j)}},function(){i--})};h()}else i++,b.file(function(b){try{i--,b.path=(c?c:"")+b.name,a.push(b)}catch(d){i--,console.error(d)}},function(){i--})}var f=[],i=0,j=a.dataTransfer.items;if(j&&j.length>0&&"file"!==h.protocol())for(var k=0;k<j.length;k++){if(j[k].webkitGetAsEntry&&j[k].webkitGetAsEntry()&&j[k].webkitGetAsEntry().isDirectory){var l=j[k].webkitGetAsEntry();if(l.isDirectory&&!c)continue;null!=l&&e(f,l)}else{var m=j[k].getAsFile();null!=m&&f.push(m)}if(!d&&f.length>0)break}else{var n=a.dataTransfer.files;if(null!=n)for(var o=0;o<n.length&&(f.push(n.item(o)),d||!(f.length>0));o++);}var p=0;!function q(a){g(function(){if(i)10*p++<2e4&&q(10);else{if(!d&&f.length>1){for(k=0;"directory"===f[k].type;)k++;f=[f[k]]}b(f)}},a||0)}()}var l=b(),m=function(a,b,c){return i.attrGetter(a,d,b,c)};if(m("dropAvailable")&&g(function(){a[m("dropAvailable")]?a[m("dropAvailable")].value=l:a[m("dropAvailable")]=l}),!l)return void(m("ngfHideOnDropNotAvailable",a)===!0&&c.css("display","none"));i.registerValidators(e,d,a);var n=!1;d.$observe("ngfDrop",function(a){a===!1?c.attr("disabled","disabled"):a===!0&&c.removeAttr("disabled")});var o,p=null,q=m("ngfStopPropagation",a),r=1;c[0].addEventListener("dragover",function(b){if(!c.attr("disabled")&&!n){if(b.preventDefault(),q(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}g.cancel(p),o||(o="C",j(a,d,b,function(a){o=a,c.addClass(o)}))}},!1),c[0].addEventListener("dragenter",function(b){c.attr("disabled")||n||(b.preventDefault(),q(a)&&b.stopPropagation())},!1),c[0].addEventListener("dragleave",function(){c.attr("disabled")||n||(p=g(function(){c.removeClass(o),o=null},r||1))},!1),c[0].addEventListener("drop",function(b){c.attr("disabled")||n||(b.preventDefault(),q(a)&&b.stopPropagation(),c.removeClass(o),o=null,k(b,function(c){i.updateModel(e,d,a,m("ngfChange")||m("ngfDrop"),c,b)},m("ngfAllowDir",a)!==!1,m("multiple")||m("ngfMultiple",a)))},!1),c[0].addEventListener("paste",function(b){if(!c.attr("disabled")&&!n){var f=[],g=b.clipboardData||b.originalEvent.clipboardData;if(g&&g.items){for(var h=0;h<g.items.length;h++)-1!==g.items[h].type.indexOf("image")&&f.push(g.items[h].getAsFile());i.updateModel(e,d,a,m("ngfChange")||m("ngfDrop"),f,b)}}},!1)}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter("ngfDropAvailable",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}();